<?php
defined('BASEPATH') OR exit('No direct script access allowed');
/**
 * Created by PhpStorm.
 * User: XFour
 * Date: 17/7/19
 * Time: 下午12:41
 */
class SearchModel extends MY_Model
{


    public function __construct()
    {
        parent::__construct();
        $this->load->helper('Common');
        $this->config->load('apiConfig');
        $this->SearchAnswerApi = $this->config->item('qaSearchAnswer');
    }

    public function test(){

        return 'a';
    }

    public function searchAnswer($keyWord){
        if(empty($keyWord)){
            return [];
        }
        $answerList = curlHttpClient($this->SearchAnswerApi,array('keyword'=>$keyWord,'mpage'=>1,'pageSize'=>8),'GET');
        //$answerList = '{"code":1001,"data":{"list":[{"answerId":8677,"title":"<em>口红</em>","content":"气色差 不涂<em>口红</em>出门别人就会问是不是病了 <em>口红</em>也是我这辈子离不开的东西","purchasechannel":null,"price":null,"image":"http://s3.mogucdn.com/p1/160707/upload_ifrgkyzzg4zdqyrzhezdambqmeyde_750x750.jpg_750x999.jpg","upCount":4,"favoritesCount":1,"isRefined":false,"time":1467875492533,"userLiked":false,"favorited":false,"readCount":22812,"commentCount":0,"topicId":0,"answerQuestion":{"questionId":1354,"title":"求一用就惊为天人 离不开的单品？","detail":null,"favoritesCount":null,"answerCount":null,"readingCount":null,"totalUpCount":null,"userInfo":null,"favorited":false,"tags":null},"answerUser":{"userId":1254,"headImage":"http://s2.mogucdn.com/p1/160705/upload_ifrdezdbgvrgmmbzhezdambqmeyde_748x750.jpg_200x200.jpg","nickName":"daminla","stage":1,"description":"","relationStatus":-1,"isNews":0,"newestFeed":null,"integral":0},"questionId":null,"userId":null,"userAt":null,"imgWidth":750,"imgHeight":750,"shareUrl":null,"tags":null,"voteState":null,"votedown":null,"subjects":null},{"answerId":19242,"title":"<em>口红</em>","content":"办公室三根<em>口红</em>两根唇彩颜色相似度98%，全是豆沙色。有比我更专一的嘛？\uD83D\uDE02\uD83D\uDE02\n","purchasechannel":null,"price":null,"image":"http://s3.mogucdn.com/p2/160803/upload_4kb7l1i6cib2aee5de1bad5kac5di_746x746.jpg_750x999.jpg","upCount":6,"favoritesCount":1,"isRefined":true,"time":1470204854968,"userLiked":false,"favorited":false,"readCount":23159,"commentCount":2,"topicId":0,"answerQuestion":{"questionId":2002,"title":"我想看看你们的办公桌什么样？","detail":null,"favoritesCount":null,"answerCount":null,"readingCount":null,"totalUpCount":null,"userInfo":null,"favorited":false,"tags":null},"answerUser":{"userId":1527,"headImage":"http://s3.mogucdn.com/p1/160729/upload_ifqwinbwha4dqyzqmezdambqgyyde_750x750.jpg_200x200.jpg","nickName":"Ruby","stage":1,"description":"","relationStatus":-1,"isNews":0,"newestFeed":null,"integral":0},"questionId":null,"userId":null,"userAt":null,"imgWidth":746,"imgHeight":746,"shareUrl":null,"tags":null,"voteState":null,"votedown":null,"subjects":null},{"answerId":61818,"title":"<em>口红</em>！","content":"bbr<em>口红</em>随便买 盲买都不会踩雷！ 黄皮友好 显色度好 滋润度好！\n包装深得我心 15年圣诞的金管美死了 当时让朋友在伦敦买的 我要是实物那么美 打死都要多买两根 可惜 在西单和汉光去找都没找到 \uD83D\uDC94金管比黑管要美好多","purchasechannel":null,"price":null,"image":"http://s3.mogucdn.com/p2/161026/upload_20a6ib81a8g78f09l5e048787cc23_750x750.jpg_750x999.jpg","upCount":7,"favoritesCount":2,"isRefined":false,"time":1477463738956,"userLiked":false,"favorited":false,"readCount":26451,"commentCount":3,"topicId":0,"answerQuestion":{"questionId":4064,"title":"burberry彩妆有什么产品推荐？","detail":null,"favoritesCount":null,"answerCount":null,"readingCount":null,"totalUpCount":null,"userInfo":null,"favorited":false,"tags":null},"answerUser":{"userId":3455,"headImage":"http://s3.mogucdn.com/p2/161129/upload_5h79g29ej30f92cedee7f6kgl580g_640x640.jpg_200x200.jpg","nickName":"Haily","stage":1,"description":"","relationStatus":-1,"isNews":0,"newestFeed":null,"integral":0},"questionId":null,"userId":null,"userAt":null,"imgWidth":750,"imgHeight":750,"shareUrl":null,"tags":null,"voteState":null,"votedown":null,"subjects":null},{"answerId":130048,"title":"<em>口红</em>","content":"直男们也被公众号洗脑了呢……看见了好几次过生日给女朋友送<em>口红</em>的。至于我自己...我趁他送之前自己买了哈哈哈哈\n\n我知道肯定有姑娘喜欢，尤其直接all in的。但是对我来说太不走心了。不管女朋友需要什么，公众号说啥就是啥。","purchasechannel":null,"price":null,"image":"","upCount":4,"favoritesCount":0,"isRefined":false,"time":1490451742758,"userLiked":false,"favorited":false,"readCount":21274,"commentCount":0,"topicId":0,"answerQuestion":{"questionId":10941,"title":"大家最不喜欢收到的礼物是什么？\n(最好能先说一下自己男生or女生，大概年龄，平时喜好，等详细信息)？","detail":null,"favoritesCount":null,"answerCount":null,"readingCount":null,"totalUpCount":null,"userInfo":null,"favorited":false,"tags":null},"answerUser":{"userId":51,"headImage":"http://s3.mogucdn.com/p2/161021/upload_52l70c6164jl7d446085e3g73li3b_638x640.jpg_200x200.jpg","nickName":"Sundaycraze","stage":1,"description":"三观不正，自知偏执，却想过个平衡的生活","relationStatus":-1,"isNews":0,"newestFeed":null,"integral":0},"questionId":null,"userId":null,"userAt":null,"imgWidth":-1,"imgHeight":-1,"shareUrl":null,"tags":null,"voteState":null,"votedown":null,"subjects":null},{"answerId":60215,"title":"<em>口红</em>！","content":"算是在装多品牌里蛮滋润的啦，我用它都不用先拿润唇膏打底。除了已经被答走的rosewood之外，我还喜欢kisses的#53 crimson pink，很显白很粉嫩的颜色。","purchasechannel":null,"price":null,"image":"http://s3.mogucdn.com/p2/161025/upload_8b5bjgii3k200bk300fg4ac019g7i_750x750.jpg_750x999.jpg","upCount":15,"favoritesCount":0,"isRefined":true,"time":1477343466625,"userLiked":false,"favorited":false,"readCount":23417,"commentCount":9,"topicId":0,"answerQuestion":{"questionId":4064,"title":"burberry彩妆有什么产品推荐？","detail":null,"favoritesCount":null,"answerCount":null,"readingCount":null,"totalUpCount":null,"userInfo":null,"favorited":false,"tags":null},"answerUser":{"userId":3230,"headImage":"http://s2.mogucdn.com/p2/161016/upload_5ahak9c526c7hb78c1g4bd695h87k_748x750.jpg_200x200.jpg","nickName":"Elaine岚","stage":1,"description":"","relationStatus":-1,"isNews":0,"newestFeed":null,"integral":0},"questionId":null,"userId":null,"userAt":null,"imgWidth":750,"imgHeight":750,"shareUrl":null,"tags":null,"voteState":null,"votedown":null,"subjects":null},{"answerId":129354,"title":"<em>口红</em>","content":"送<em>口红</em>吧，生完宝宝后，能让姐姐变得更美丽。推荐Chanel 162 Pensive，清新诱人的玫瑰米色，淡淡的唇色能为气色增添不少。","purchasechannel":null,"price":null,"image":"http://s11.mogucdn.com/p2/170324/upload_1b550i0j84h07ih465l3a8f60jek4_517x370.png_750x999.png","upCount":2,"favoritesCount":0,"isRefined":false,"time":1490355068523,"userLiked":false,"favorited":false,"readCount":15013,"commentCount":0,"topicId":0,"answerQuestion":{"questionId":10819,"title":"姐姐要生了 想给她买个礼物？","detail":null,"favoritesCount":null,"answerCount":null,"readingCount":null,"totalUpCount":null,"userInfo":null,"favorited":false,"tags":null},"answerUser":{"userId":8537,"headImage":"http://s3.mogucdn.com/p2/170612/upload_301f77glfi354l325l0106bflec5k_640x641.jpg_200x200.jpg","nickName":"八月末的闪电","stage":1,"description":"心之所向，那片海！","relationStatus":-1,"isNews":0,"newestFeed":null,"integral":0},"questionId":null,"userId":null,"userAt":null,"imgWidth":517,"imgHeight":370,"shareUrl":null,"tags":null,"voteState":null,"votedown":null,"subjects":null},{"answerId":105354,"title":"<em>口红</em>","content":"色号是Dior553，我觉得这个颜色挺适合我妈的，多大年纪她都喜欢<em>口红</em>，所以呀你还是好好充实一下提问，说清楚你妈妈的喜好，不然没法推荐","purchasechannel":null,"price":null,"image":"http://s3.mogucdn.com/p2/170208/upload_6cbfj02437h2g2cghgf97ddgggbhi_852x586.png_750x999.png","upCount":9,"favoritesCount":1,"isRefined":true,"time":1486537686635,"userLiked":false,"favorited":false,"readCount":22034,"commentCount":0,"topicId":0,"answerQuestion":{"questionId":7950,"title":"母亲节不知道送妈妈什么？","detail":null,"favoritesCount":null,"answerCount":null,"readingCount":null,"totalUpCount":null,"userInfo":null,"favorited":false,"tags":null},"answerUser":{"userId":60,"headImage":"http://s11.mogucdn.com/p2/170131/upload_2a266i5b94lhdai998jbf8i1768il_580x580.jpg_200x200.jpg","nickName":"大绵羊","stage":1,"description":"西西里的绵羊","relationStatus":-1,"isNews":0,"newestFeed":null,"integral":0},"questionId":null,"userId":null,"userAt":null,"imgWidth":852,"imgHeight":586,"shareUrl":null,"tags":null,"voteState":null,"votedown":null,"subjects":null},{"answerId":135717,"title":"<em>口红</em>","content":"自用的色号red carpet red 不是大热门的颜色不过上色很赞","purchasechannel":null,"price":null,"image":"http://s3.mogucdn.com/p2/170404/upload_000kh8haiek9hb5hbdg46k4a8c4d7_533x533.jpg_750x999.jpg","upCount":1,"favoritesCount":1,"isRefined":false,"time":1491316940795,"userLiked":false,"favorited":false,"readCount":15451,"commentCount":0,"topicId":0,"answerQuestion":{"questionId":11876,"title":"新入了CT的腮红惊艳到我了，CT家还有哪些值得入得产品？","detail":null,"favoritesCount":null,"answerCount":null,"readingCount":null,"totalUpCount":null,"userInfo":null,"favorited":false,"tags":null},"answerUser":{"userId":9344,"headImage":"http://s2.mogucdn.com/p2/170407/upload_13l2cl5c8kf95hci389ddk9fck391_300x300.jpg_200x200.jpg","nickName":"左轮","stage":1,"description":"","relationStatus":-1,"isNews":0,"newestFeed":null,"integral":0},"questionId":null,"userId":null,"userAt":null,"imgWidth":533,"imgHeight":533,"shareUrl":null,"tags":null,"voteState":null,"votedown":null,"subjects":null}],"mpage":"2","end":false,"eggSwitch":0,"eggImage":null},"message":null,"diamond":null,"success":true}';
        //var_dump($questionList);
        if($answerList && $result = json_decode($answerList,true)){
            return $result;
        }
        return [];

    }
}